import socket

server_ip = '0.0.0.0'  
server_port = 12345  

def save_scan_results(results):
    with open('scan_results.txt', 'a') as file:
        file.write(results.decode('utf-8'))

def start_server():
    open('scan_results.txt', 'a').close()

    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server_socket.bind((server_ip, server_port))
    server_socket.listen(1)

    print(f"Server is listening on {server_ip}:{server_port}")

    while True:
        client_socket, client_addr = server_socket.accept()
        print(f"Connection from {client_addr}")
        
        scan_results = client_socket.recv(4096)
        if scan_results:
            save_scan_results(scan_results)
            print("Scan results saved to scan_results.txt")
        
        client_socket.close()

if __name__ == "__main__":
    start_server()
